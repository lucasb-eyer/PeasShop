// Generated by CoffeeScript 1.6.1
var conn, connect, start_game;

conn = 0;

connect = function() {
  var addr, err, g;
  if (window["WebSocket"] == null) {
    err = "No WebSocket support. Get a better browser!";
    alert(err);
    throw new Error(err);
  }
  g = (window.location.pathname.match(/.*game\/([a-zA-Z0-9]+).*/))[1];
  addr = "ws://" + window.location.host + "/ws?g=" + g;
  conn = new WebSocket(addr);
  conn.onopen = function(evt) {
    return conn.send(g);
  };
  conn.onclose = function(evt) {
    console.log("Connection lost");
    return console.log(evt);
  };
  return conn.onmessage = function(evt) {
    var msg;
    console.log("Message!");
    console.log(evt.data);
    msg = JSON.parse(evt.data);
    switch (msg.type) {
      case 'start':
        return start_game(msg.items);
    }
  };
};

start_game = function(items) {
  var item, _i, _len, _results;
  ($('#waiting')).hide();
  ($('#game')).show();
  _results = [];
  for (_i = 0, _len = items.length; _i < _len; _i++) {
    item = items[_i];
    _results.push($(''));
  }
  return _results;
};
